import{r as s,j as e,C as f,u as v,a as g,b as j,E as b,H as y}from"./three-addons-DaCil1SF.js";import{ar as S,f as E,M as C,ae as a}from"./three-core-CbFsEs17.js";const L="/tetocat.glb";function N(){return e.jsx(y,{center:!0,children:e.jsx("div",{className:"animate-pulse bg-black/70 px-6 py-2 text-xs font-semibold uppercase tracking-[0.35em] text-white/70 backdrop-blur-sm transition-opacity duration-500",children:"Loading 3D preview…"})})}const R=s.memo(function(){const t=s.useRef(null),o=s.useRef({x:0,y:0}),{scene:l}=v(L,!0),c=s.useMemo(()=>l.clone(!0),[l]),u=s.useMemo(()=>{const r=new S().setFromObject(c),n=new E;return r.getSize(n),n.y||1},[c]);return s.useLayoutEffect(()=>{c.traverse(r=>{r instanceof C&&(r.castShadow=!0,r.receiveShadow=!0)})},[c]),s.useEffect(()=>{const r=n=>{o.current={x:n.clientX/window.innerWidth*2-1,y:n.clientY/window.innerHeight*2-1}};return window.addEventListener("pointermove",r),()=>window.removeEventListener("pointermove",r)},[]),g(r=>{if(!t.current)return;const n=a.clamp(o.current.x,-1,1),p=a.clamp(o.current.y,-1,1),h=r.viewport.height*.8,d=a.clamp(h/u,.8,.8),x=a.lerp(t.current.scale.x,d,.08);t.current.scale.setScalar(x),t.current.rotation.y=a.lerp(t.current.rotation.y,n*.5,.08),t.current.rotation.x=a.lerp(t.current.rotation.x,-p*.5+.15,.08);const m=0,w=-.7;t.current.position.x=a.lerp(t.current.position.x,m+n*.08,.08),t.current.position.y=a.lerp(t.current.position.y,w+p*.08,.08)}),e.jsx("group",{ref:t,position:[.2,-.4,0],children:e.jsx("primitive",{object:c,dispose:null})})});function k(){return e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:.6}),e.jsx("directionalLight",{position:[4,6,6],intensity:1.2,castShadow:!0,"shadow-mapSize-width":512,"shadow-mapSize-height":512,"shadow-camera-near":.5,"shadow-camera-far":14}),e.jsx("spotLight",{position:[-4,5,2],intensity:.9,angle:.55,penumbra:.4,castShadow:!0,"shadow-mapSize-width":512,"shadow-mapSize-height":1024}),e.jsx(j,{position:[0,-.55,0],opacity:.35,scale:4.5,blur:2.8,far:3}),e.jsx(b,{preset:"city"})]})}function z({onRetry:i}){return e.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-3 bg-black/60 text-center text-sm text-white/70",children:[e.jsx("span",{children:"3D preview offline."}),e.jsx("button",{className:"px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-white/80 transition hover:text-white",onClick:i,type:"button",children:"Retry"})]})}class D extends s.Component{state={hasError:!1};static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t){console.error("3D preview failed to load",t)}handleRetry=()=>{this.setState({hasError:!1}),this.props.onReset()};render(){return this.state.hasError?e.jsx(z,{onRetry:this.handleRetry}):this.props.children}}function H(){const[i,t]=s.useState(0);return e.jsx("section",{className:"pointer-events-none absolute right-0 top-1/2 z-0 -translate-y-1/2","aria-hidden":!0,children:e.jsx(D,{onReset:()=>t(o=>o+1),children:e.jsxs("div",{className:"relative h-[min(80vh,700px)] w-[min(48vw,600px)] min-w-[280px]",children:[e.jsx(f,{className:"pointer-events-none absolute inset-0 h-full w-full",camera:{position:[.1,.95,4.2],fov:50},dpr:[1,1.5],shadows:!0,onCreated:({gl:o})=>{o.setClearColor("#000000",0)},children:e.jsxs(s.Suspense,{fallback:e.jsx(N,{}),children:[e.jsx(R,{}),e.jsx(k,{})]})}),e.jsxs("div",{className:"pointer-events-none absolute bottom-6 right-4 flex flex-col items-end gap-2 text-[0.6rem] uppercase tracking-[0.25em] text-white/60",children:[e.jsx("span",{className:"text-white/80",children:"Teto teto san & 3D Web"}),e.jsx("span",{className:"text-white/50",children:"Craft · Integrate · Iterate · 2025"})]})]})},i)})}export{H as default};
